dist: bionic
language: python

cache: pip

python:
    - "3.6"
    - "3.7"
    - "3.8"
    - "3.9"
    - "3.10"

addons:
    postgresql: "9.5"

services:
  - postgresql

before_install:
    # https://travis-ci.community/t/build-errors-installing-a-common-dependency-docopt-on-python-3-7-but-not-other-versions/12886/5
    # - if [[ $TRAVIS_PYTHON_VERSION == 3.7 ]]; then pip install -U importlib_metadata; fi
    - if [[ $TRAVIS_PYTHON_VERSION == 3.8 ]]; then pip install -U setuptools~=46.0.0; fi

install:
    - pip install -U -r requirements.txt
    - pip install -U -r requirements_dev.txt

script:
    - scripts/test

after_script:
    - pip install codecov
    - codecov
